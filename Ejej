<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>Ejej 相機翻譯 GPT 字典</title>
<style>
 body{font-family:Arial;padding:20px;text-align:center;}
 video{width:100%;max-width:500px;border:1px solid #ccc;margin-top:10px;}
 button{padding:10px 20px;margin:10px;font-size:16px;}
 #status{color:red;margin-top:10px;font-weight:bold;}
 iframe{width:100%;height:400px;border:1px solid #ccc;margin-top:20px;}
</style>
</head>
<body>
<h2>📷 Ejej 相機翻譯 + GPT 字典</h2>
<button onclick="startCamera()">啟動相機</button>
<button onclick="captureText()">擷取並翻譯</button>
<div id="status"></div>
<video id="video" autoplay playsinline></video>
<canvas id="canvas" style="display:none;"></canvas>
<div id="result"></div>

<script>
async function startCamera(){
    const video=document.getElementById('video');
    const status=document.getElementById('status');
    status.innerText="正在啟動相機...";
    try{
        const stream=await navigator.mediaDevices.getUserMedia({video:true});
        video.srcObject=stream;
        status.innerText="✅ 相機已啟動";
    }catch(e){
        status.innerText="❌ 相機無法啟動，原因："+e.message+"\n請確認使用的是HTTPS或允許權限";
    }
}

async function captureText(){
    const detectedText = prompt("📌 偵測中… (目前用手動測試) 請輸入模擬的文字");
    if(detectedText) searchWord(detectedText);
}

function searchWord(word){
    const prompt = `請根據這個字提供注音、五個造詞、兩個造句，格式清楚:\n字:${word}`;
    const iframeSrc = "https://www.gptbots.ai/ai-search/sehrlkvav4fumtgzm9l2c0g/chat.html?prompt=" + encodeURIComponent(prompt);
    document.getElementById('result').innerHTML = '<iframe src="'+iframeSrc+'"></iframe>';
}
</script>
</body>
</html>
